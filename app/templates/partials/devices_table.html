{% if new_api_key %}
<div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
    <strong>New API Key Created!</strong><br>
    <p style="margin: 10px 0 5px 0;">Save this key - it won't be shown again:</p>
    <code style="background: white; padding: 8px; display: block; word-break: break-all;">{{ new_api_key }}</code>
</div>
{% endif %}

{% if devices %}
<table style="width: 100%; border-collapse: collapse;">
    <thead>
        <tr style="border-bottom: 2px solid #e0e0e0;">
            <th style="text-align: left; padding: 10px 0;">Name</th>
            <th style="text-align: left; padding: 10px 0;">Created</th>
            <th style="text-align: left; padding: 10px 0;">Last Used</th>
            <th style="text-align: left; padding: 10px 0;"></th>
        </tr>
    </thead>
    <tbody>
        {% for device in devices %}
        <tr style="border-bottom: 1px solid #f0f0f0;" id="device-{{ device.id }}">
            <td style="padding: 12px 0;">{{ device.name }}</td>
            <td style="padding: 12px 0; color: #666;">{{ device.created_at.strftime('%b %d, %Y') }}</td>
            <td style="padding: 12px 0; color: #666;">
                {% if device.last_used_at %}
                {{ device.last_used_at.strftime('%b %d, %Y') }}
                {% else %}
                Never
                {% endif %}
            </td>
            <td style="padding: 12px 0; text-align: right;">
                <button hx-delete="/devices/{{ device.id }}" hx-target="#device-{{ device.id }}"
                    hx-swap="outerHTML swap:200ms" hx-confirm="Revoke this device key?" class="secondary"
                    style="padding: 6px 12px; font-size: 13px;">
                    Revoke
                </button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p style="color: #666;">No devices yet. Create one above to start capturing highlights from other devices.</p>
{% endif %}